# 🤖 AI 학습용 노하우 구조화 도구

Samsung Display 물류 반송 분석을 위한 전문가 노하우를 구조화하여 AI에게 학습시킬 수 있는 도구입니다.

## 📋 목차

- [기능 소개](#기능-소개)
- [설치 방법](#설치-방법)
- [사용 방법](#사용-방법)
- [노드 타입 설명](#노드-타입-설명)
- [JSON 내보내기](#json-내보내기)

## 🎯 기능 소개

이 도구는 전문가의 **암묵지(Tacit Knowledge)**를 **형식지(Explicit Knowledge)**로 변환하여 AI에게 학습시킬 수 있는 구조화된 데이터를 생성합니다.

### 핵심 기능

1. **노드 기반 워크플로우 작성**: 드래그 앤 드롭으로 직관적인 로직 구성
2. **5가지 노드 타입**: 상황, 정보수집, 판단, 반복, 결론
3. **AI 학습용 JSON 내보내기**: 구조화된 데이터를 JSON 형식으로 저장

## 📦 설치 방법

### 1. 필요한 패키지 설치

```bash
pip install -r requirements.txt
```

### 2. 프로그램 실행

```bash
python main.py
```

## 🎮 사용 방법

### 노드 추가하기

**방법 1: 그래프 영역 우클릭**
1. 그래프 영역(회색 배경)에서 **우클릭**
2. 나타나는 메뉴에서 원하는 노드 타입 선택:
   - `상황 (Trigger)` - 분석 시작점
   - `정보 수집 (Data Gathering)` - 데이터 조회
   - `판단 (Decision)` - 조건 분기
   - `반복 (Loop)` - 반복 처리
   - `결론 (Conclusion)` - 최종 결론

**방법 2: 기존 노드에서 연결**
- 노드의 출력 포트(오른쪽)에서 드래그하여 새 노드 생성

### 노드 연결하기

1. 노드의 **출력 포트**(오른쪽 초록색/주황색 원)를 클릭
2. 다른 노드의 **입력 포트**(왼쪽 초록색/주황색 원)로 드래그
3. 연결선이 생성되면 연결 완료!

### 노드 속성 편집하기

1. 노드를 **클릭**하여 선택
2. 우측 **속성 (Properties)** 패널에서 편집:
   - 텍스트 입력: 상황 설명, 판단 조건 등
   - 드롭다운: 테이블 선택, 컬럼 선택 등

### 노드 이동하기

- 노드를 **드래그**하여 원하는 위치로 이동

### 노드 삭제하기

- 노드를 선택하고 **Delete** 키 또는 **우클릭 > 삭제**

## 📊 노드 타입 설명

### 1. 상황 노드 (Trigger) 🟢
- **역할**: 분석을 시작하는 출발점
- **AI 학습 포인트**: "이런 문제가 발생했을 때 분석을 시작해라"
- **속성**:
  - 상황 설명: 문제 상황을 설명
  - 상황 유형: 반송 지연, 설비 오류 등

### 2. 정보 수집 노드 (Data Gathering) 🔵
- **역할**: 필요한 데이터를 조회
- **AI 학습 포인트**: "문제를 풀려면 이 데이터를 먼저 찾아봐야 해"
- **속성**:
  - 대상 테이블: TB_MCS_LOG, TB_WMS_STOCK 등
  - 확인 컬럼: Error_Code, Transport_ID 등
  - AI 지시사항: 왜 이 데이터를 봐야 하는지 설명

### 3. 판단 노드 (Decision) 🔴
- **역할**: 조건에 따라 분기 처리
- **AI 학습 포인트**: Chain of Thought (생각의 사슬) 핵심
- **속성**:
  - 판단 조건: `error_code == "JAM"`, `battery_level < 20` 등
  - 판단 근거: 왜 이렇게 판단하는지 설명
- **출력**: True (참) / False (거짓) 두 가지 분기

### 4. 반복 노드 (Loop) 🟣
- **역할**: 리스트 전체를 반복 처리
- **AI 학습 포인트**: "하나만 보지 말고, 리스트 전체를 훑어서 패턴을 찾아"
- **속성**:
  - 반복 대상: `failed_transport_jobs`, `해당 시간대의 모든 반송 명령` 등
  - AI 지시사항: 반복 처리 방법 설명

### 5. 결론 노드 (Conclusion) 🟠
- **역할**: 최종 결론 정리
- **AI 학습 포인트**: 최종 결론을 명확하게 정리
- **속성**:
  - 결론 내용: 분석 결과 요약
  - 결론 유형: 원인 파악, 조치 사항, 예방 방안 등

## 💾 JSON 내보내기

### 방법 1: 툴바 버튼 사용 (권장)

1. 상단 툴바에서 **💾 JSON 내보내기** 버튼 클릭
2. 저장할 파일명 입력 (예: `my_workflow.json`)
3. 저장 완료!

### 방법 2: 메뉴 사용

1. 메뉴바에서 **파일 (File) > JSON으로 내보내기** 선택
2. 저장할 파일명 입력
3. 저장 완료!

### JSON 파일 구조

내보낸 JSON 파일은 다음과 같은 구조를 가집니다:

```json
{
  "workflow_name": "물류_반송_분석_가이드",
  "description": "전문가 노하우를 구조화한 AI 학습용 워크플로우",
  "steps": [
    {
      "id": 1,
      "name": "상황: 반송 지연",
      "type": "trigger",
      "situation": "반송 명령 후 10분 지연",
      "instruction": "상황: 반송 명령 후 10분 지연 - 이 상황이 발생했을 때 분석을 시작하세요."
    },
    {
      "id": 2,
      "name": "OHT 상태 조회",
      "type": "observation",
      "table": "TB_OHT_STATUS",
      "column": "Battery_Level",
      "instruction": "OHT 상태 로그에서 배터리 잔량을 확인해"
    },
    {
      "id": 3,
      "name": "배터리 체크",
      "type": "reasoning",
      "condition": "battery_level < 20",
      "reasoning": "배터리가 20% 이하면 충전 대기 상태일 수 있음",
      "instruction": "조건: battery_level < 20 - 배터리가 20% 이하면 충전 대기 상태일 수 있음"
    }
  ]
}
```

이 JSON 파일을 AI 학습 데이터로 사용할 수 있습니다!

## 🎓 예시 시나리오

프로그램을 실행하면 **반송 지연 분석** 예시 워크플로우가 자동으로 생성됩니다:

1. **상황**: 반송 명령 후 10분 지연
2. **반복**: 해당 라인의 모든 OHT 차량에 대해 검사
3. **정보 수집**: OHT 상태 로그에서 배터리 잔량 확인
4. **판단**: 배터리가 20% 이하인가?
   - **True**: 충전 대기로 인한 지연 (결론)
   - **False**: 센서 감지 이력 확인 → 추가 분석

## 💡 팁

- **노드 이름 변경**: 노드를 더블클릭하거나 속성 패널에서 이름 변경
- **노드 복사**: 노드 선택 후 Ctrl+C, Ctrl+V
- **전체 선택**: Ctrl+A
- **되돌리기/다시하기**: Ctrl+Z, Ctrl+Y
- **확대/축소**: 마우스 휠 또는 Ctrl + 마우스 휠

## 🐛 문제 해결

### 노드가 보이지 않아요
- 그래프 영역을 우클릭하여 노드 메뉴 확인
- 노드가 화면 밖에 있을 수 있으니 확대/축소로 확인

### JSON 내보내기가 안 돼요
- 툴바 버튼이 보이지 않으면, Python 코드에서 직접 호출:
  ```python
  export_to_json(graph, 'my_workflow.json')
  ```

### 프로그램이 실행되지 않아요
- NumPy 버전 문제일 수 있습니다:
  ```bash
  pip install "numpy<2.0.0"
  ```

## 📝 라이선스

이 프로젝트는 Samsung Display 내부 사용을 위한 것입니다.

---

**만든 이**: AI 학습용 노하우 구조화 도구 개발팀  
**버전**: 1.0.0  
**최종 업데이트**: 2024

